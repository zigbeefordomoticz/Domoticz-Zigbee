"use strict";(self.webpackChunkz4d_plugin=self.webpackChunkz4d_plugin||[]).push([[192],{1192:(F,p,a)=>{a.r(p),a.d(p,{SettingsModule:()=>R});var v=a(4466),f=a(1083),_=a(8648),t=a(5e3),U=a(571),h=a(972),r=a(3075),Z=a(2290),T=a(9513),l=a(7232),x=a(3361),d=a(9808),C=a(4076);function b(e,o){if(1&e&&(t.TgZ(0,"div",4),t._uU(1,"\n    "),t._UZ(2,"label",5),t._uU(3,"\n    "),t.TgZ(4,"div",6),t._uU(5,"\n      "),t._UZ(6,"input",7),t._uU(7,"\n    "),t.qZA(),t._uU(8,"\n  "),t.qZA()),2&e){const n=t.oxw(2);t.xp6(2),t.s9C("translate",n.setting.Name)}}function S(e,o){if(1&e&&(t.TgZ(0,"div",4),t._uU(1,"\n    "),t._UZ(2,"label",5),t._uU(3,"\n    "),t.TgZ(4,"div",6),t._uU(5,"\n      "),t._UZ(6,"input",7),t._uU(7,"\n    "),t.qZA(),t._uU(8,"\n  "),t.qZA()),2&e){const n=t.oxw(2);t.xp6(2),t.s9C("translate",n.setting.Name)}}function A(e,o){if(1&e&&(t.TgZ(0,"div",4),t._uU(1,"\n    "),t._UZ(2,"label",5),t._uU(3,"\n    "),t.TgZ(4,"div",6),t._uU(5,"\n      "),t._UZ(6,"input",8),t._uU(7,"\n    "),t.qZA(),t._uU(8,"\n  "),t.qZA()),2&e){const n=t.oxw(2);t.xp6(2),t.s9C("translate",n.setting.Name)}}function N(e,o){if(1&e&&(t.TgZ(0,"div",4),t._uU(1,"\n    "),t._UZ(2,"label",5),t._uU(3,"\n    "),t.TgZ(4,"div",6),t._uU(5,"\n      "),t._UZ(6,"input",9),t._uU(7,"\n    "),t.qZA(),t._uU(8,"\n  "),t.qZA()),2&e){const n=t.oxw(2);t.xp6(2),t.s9C("translate",n.setting.Name)}}function k(e,o){if(1&e&&(t.TgZ(0,"div",4),t._uU(1,"\n    "),t._UZ(2,"label",5),t._uU(3,"\n    "),t.TgZ(4,"div",6),t._uU(5,"\n      "),t.TgZ(6,"ng-select",10),t._uU(7,"\n      "),t.qZA(),t._uU(8,"\n    "),t.qZA(),t._uU(9,"\n  "),t.qZA()),2&e){const n=t.oxw(2);t.xp6(2),t.s9C("translate",n.setting.Name),t.xp6(4),t.Q6J("items",n.list)("compareWith",n.compareNumeric)("closeOnSelect",!0)}}function y(e,o){if(1&e&&(t.TgZ(0,"div",11),t._uU(1,"\n    "),t._UZ(2,"input",12),t._uU(3,"\n    "),t._UZ(4,"label",13),t._uU(5,"\n  "),t.qZA()),2&e){const n=t.oxw(2);t.xp6(2),t.s9C("id",n.setting.Name),t.xp6(2),t.s9C("for",n.setting.Name),t.s9C("translate",n.setting.Name)}}function J(e,o){if(1&e&&(t.TgZ(0,"div",1),t._uU(1,"\n  "),t.YNc(2,b,9,1,"div",2),t._uU(3,"\n  "),t.YNc(4,S,9,1,"div",2),t._uU(5,"\n  "),t.YNc(6,A,9,1,"div",2),t._uU(7,"\n  "),t.YNc(8,N,9,1,"div",2),t._uU(9,"\n  "),t.YNc(10,k,10,4,"div",2),t._uU(11,"\n  "),t.YNc(12,y,6,3,"div",3),t._uU(13,"\n"),t.qZA()),2&e){const n=t.oxw();t.Q6J("formGroupName",n.setting.Name),t.xp6(2),t.Q6J("ngIf","str"===n.setting.DataType),t.xp6(2),t.Q6J("ngIf","path"===n.setting.DataType),t.xp6(2),t.Q6J("ngIf","int"===n.setting.DataType),t.xp6(2),t.Q6J("ngIf","hex"===n.setting.DataType),t.xp6(2),t.Q6J("ngIf","list"===n.setting.DataType),t.xp6(2),t.Q6J("ngIf","bool"===n.setting.DataType)}}new _.Yd("SettingComponent");let q=(()=>{class e{constructor(n,i,s){this.formBuilder=n,this.fgd=i,this.translate=s,this.list=[]}ngOnChanges(n){let i;if(n.setting&&n.setting.currentValue){this.setting=n.setting.currentValue,"hex"===this.setting.DataType?i=this.formBuilder.group({current:["",r.kI.compose([r.kI.required,r.kI.pattern("^[0-9A-Fa-f]+")])]}):"bool"===this.setting.DataType?i=this.formBuilder.group({current:[]}):"list"===this.setting.DataType?(i=this.formBuilder.group({current:[null,r.kI.required]}),this.list=[],this.setting.list.forEach(c=>{const u=Object.keys(c)[0],m=Object.values(c)[0];this.list.push({label:u,value:m})})):i=this.formBuilder.group({current:["",r.kI.required]}),this.fgd.form.addControl(this.setting.Name,i);const s=""!==this.setting.current_value?this.setting.current_value:this.setting.default_value;this.fgd.form.get(this.setting.Name).get("current").patchValue(s)}}compareNumeric(n,i){return isNaN(n.value)?n.value===i:n.value===Number(i)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(r.qu),t.Y36(r.sg),t.Y36(l.sK))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-setting"]],inputs:{setting:"setting",advanced:"advanced"},features:[t._Bn([],[{provide:r.gN,useExisting:r.sg}]),t.TTD],decls:2,vars:1,consts:[[3,"formGroupName",4,"ngIf"],[3,"formGroupName"],["class","form-group row mt-2",4,"ngIf"],["class","row mt-2 custom-control custom-checkbox",4,"ngIf"],[1,"form-group","row","mt-2"],["for","current",1,"col-sm-6","col-form-label",3,"translate"],[1,"col-sm"],["type","text","formControlName","current",1,"w-100","form-control"],["type","number","formControlName","current",1,"w-50","form-control"],["type","text","formControlName","current",1,"w-50","form-control"],["bindLabel","label","bindValue","value","formControlName","current",3,"items","compareWith","closeOnSelect"],[1,"row","mt-2","custom-control","custom-checkbox"],["formControlName","current","type","checkbox",1,"custom-control-input","form-control",3,"id"],[1,"ml-3","custom-control-label",3,"for","translate"]],template:function(n,i){1&n&&(t.YNc(0,J,14,7,"div",0),t._uU(1,"\n")),2&n&&t.Q6J("ngIf",!1===i.setting.Advanced||i.advanced===i.setting.Advanced)},directives:[d.O5,r.JL,r.x0,l.Pi,r.Fj,r.JJ,r.u,r.wV,C.w9,r.Wl],styles:["was-validated[_ngcontent-%COMP%]   .custom-control-input[_ngcontent-%COMP%]:valid ~ .custom-control-label[_ngcontent-%COMP%], .custom-control-input.is-valid[_ngcontent-%COMP%] ~ .custom-control-label[_ngcontent-%COMP%]{color:#000}"]}),e})();const g=["contentRestart"];function M(e,o){if(1&e&&(t.ynx(0),t._uU(1,"\n                  "),t._UZ(2,"app-setting",28),t._uU(3,"\n                "),t.BQk()),2&e){const n=o.$implicit,i=t.oxw(4);t.xp6(2),t.Q6J("setting",n)("advanced",i.advanced)}}function O(e,o){if(1&e&&(t.TgZ(0,"div",22),t._uU(1,"\n            "),t._UZ(2,"div",23),t._uU(3,"\n            "),t.TgZ(4,"div",24),t._uU(5,"\n              "),t.TgZ(6,"div",25),t._uU(7,"\n                "),t._UZ(8,"h5",26),t._uU(9,"\n              "),t.qZA(),t._uU(10,"\n              "),t.TgZ(11,"div",27),t._uU(12,"\n                "),t.YNc(13,M,4,2,"ng-container",20),t._uU(14,"\n              "),t.qZA(),t._uU(15,"\n            "),t.qZA(),t._uU(16,"\n          "),t.qZA()),2&e){const n=t.oxw().$implicit,i=t.oxw(2);t.xp6(2),t.Q6J("innerHTML",i.getTranslation("setting.header.",n._Theme),t.oJD),t.xp6(6),t.Q6J("innerHTML",i.getTranslation("setting.subtitle.",n._Theme),t.oJD),t.xp6(5),t.Q6J("ngForOf",n.ListOfSettings)}}function w(e,o){if(1&e&&(t.TgZ(0,"div"),t._uU(1,"\n          "),t.YNc(2,O,17,3,"div",21),t._uU(3,"\n        "),t.qZA()),2&e){const n=o.$implicit,i=t.oxw(2);t.xp6(2),t.Q6J("ngIf",i.hasBasicSettings(n.ListOfSettings))}}function Y(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"form",4),t._uU(1,"\n  "),t.TgZ(2,"fieldset",5),t._uU(3,"\n    "),t.TgZ(4,"legend"),t._uU(5,"\n      "),t.TgZ(6,"div",6),t._uU(7,"\n        "),t._UZ(8,"div",7),t.ALo(9,"translate"),t._uU(10,"\n        "),t.TgZ(11,"div",8),t._uU(12,"\n          "),t.TgZ(13,"div",9),t._uU(14,"\n            "),t.TgZ(15,"div",10),t._uU(16,"\n              "),t.TgZ(17,"button",11),t.NdJ("click",function(){return t.CHM(n),t.oxw().updateSettings()}),t.qZA(),t._uU(18,"\n            "),t.qZA(),t._uU(19,"\n            "),t.TgZ(20,"div",12),t._uU(21,"\n              "),t.TgZ(22,"button",13),t.NdJ("click",function(){return t.CHM(n),t.oxw().reinitSettings()}),t.qZA(),t._uU(23,"\n            "),t.qZA(),t._uU(24,"\n            "),t.TgZ(25,"div",14),t._uU(26,"\n              "),t.TgZ(27,"input",15),t.NdJ("click",function(s){return t.CHM(n),t.oxw().advancedSettings(s)}),t.qZA(),t._uU(28,"\n              "),t._UZ(29,"label",16),t._uU(30,"\n            "),t.qZA(),t._uU(31,"\n          "),t.qZA(),t._uU(32,"\n        "),t.qZA(),t._uU(33,"\n      "),t.qZA(),t._uU(34,"\n    "),t.qZA(),t._uU(35,"\n    "),t._UZ(36,"h5",17),t.ALo(37,"translate"),t._uU(38,"\n  "),t.qZA(),t._uU(39,"\n  "),t.TgZ(40,"div",18),t._uU(41,"\n    "),t.TgZ(42,"div",6),t._uU(43,"\n      "),t.TgZ(44,"div",19),t._uU(45,"\n        "),t.YNc(46,w,4,1,"div",20),t._uU(47,"\n      "),t.qZA(),t._uU(48,"\n    "),t.qZA(),t._uU(49,"\n  "),t.qZA(),t._uU(50,"\n"),t.qZA()}if(2&e){const n=t.oxw();t.Q6J("formGroup",n.form),t.xp6(8),t.Q6J("innerHTML",t.lcZ(9,6,"setting.help.legend"),t.oJD),t.xp6(9),t.Q6J("disabled",!n.form.valid),t.xp6(10),t.Q6J("checked",n.advanced),t.xp6(9),t.Q6J("innerHTML",t.lcZ(37,8,"setting.help.link"),t.oJD),t.xp6(10),t.Q6J("ngForOf",n.settings)}}function Q(e,o){if(1&e){const n=t.EpF();t._uU(0,"\n  "),t.TgZ(1,"div",29),t._uU(2,"\n    "),t._UZ(3,"h4",30),t._uU(4,"\n    "),t.TgZ(5,"button",31),t.NdJ("click",function(){return t.CHM(n).$implicit.dismiss("Cross click")}),t._uU(6,"\n      "),t.TgZ(7,"span",32),t._uU(8,"\xd7"),t.qZA(),t._uU(9,"\n    "),t.qZA(),t._uU(10,"\n  "),t.qZA(),t._uU(11,"\n  "),t._UZ(12,"div",33),t._uU(13,"\n  "),t.TgZ(14,"div",34),t._uU(15,"\n    "),t.TgZ(16,"button",35),t.NdJ("click",function(){return t.CHM(n).$implicit.dismiss("cancel")}),t.qZA(),t._uU(17,"\n  "),t.qZA(),t._uU(18,"\n")}}function H(e,o){if(1&e){const n=t.EpF();t._uU(0,"\n  "),t.TgZ(1,"div",29),t._uU(2,"\n    "),t._UZ(3,"h4",36),t._uU(4,"\n    "),t.TgZ(5,"button",31),t.NdJ("click",function(){return t.CHM(n).$implicit.dismiss("Cross click")}),t._uU(6,"\n      "),t.TgZ(7,"span",32),t._uU(8,"\xd7"),t.qZA(),t._uU(9,"\n    "),t.qZA(),t._uU(10,"\n  "),t.qZA(),t._uU(11,"\n  "),t._UZ(12,"div",37),t._uU(13,"\n  "),t.TgZ(14,"div",34),t._uU(15,"\n    "),t.TgZ(16,"button",38),t.NdJ("click",function(){return t.CHM(n).$implicit.dismiss("cancel")}),t.qZA(),t._uU(17,"\n  "),t.qZA(),t._uU(18,"\n")}}function I(e,o){if(1&e){const n=t.EpF();t._uU(0,"\n  "),t.TgZ(1,"div",29),t._uU(2,"\n    "),t._UZ(3,"h4",39),t._uU(4,"\n    "),t.TgZ(5,"button",31),t.NdJ("click",function(){return t.CHM(n).$implicit.dismiss("Cross click")}),t._uU(6,"\n      "),t.TgZ(7,"span",32),t._uU(8,"\xd7"),t.qZA(),t._uU(9,"\n    "),t.qZA(),t._uU(10,"\n  "),t.qZA(),t._uU(11,"\n  "),t._UZ(12,"div",40),t._uU(13,"\n  "),t.TgZ(14,"div",34),t._uU(15,"\n    "),t.TgZ(16,"button",41),t.NdJ("click",function(){return t.CHM(n).$implicit.dismiss("cancel")}),t.qZA(),t._uU(17,"\n  "),t.qZA(),t._uU(18,"\n")}}new _.Yd("SettingsComponent");const L=[{path:"",component:(()=>{class e{constructor(n,i,s,c,u,m,B){this.modalService=n,this.apiService=i,this.formBuilder=s,this.toastr=c,this.headerService=u,this.translate=m,this.tracker=B,this.advanced=!1}ngOnInit(){this.form=this.formBuilder.group({}),this.apiService.getSettings().subscribe(n=>{this.settings=n,this.settings.sort((i,s)=>i._Order-s._Order)})}reinitSettings(){this.settings.forEach(n=>{const i=[];n.ListOfSettings.forEach(s=>{"path"!==s.DataType&&(s.current_value=s.default_value),i.push(Object.assign({},s))}),n.ListOfSettings=i}),this.settings=[...this.settings],this.form.markAsTouched()}advancedSettings(n){this.advanced=!!n.currentTarget.checked}updateSettings(){this.form.invalid?this.form.markAsTouched():(Object.keys(this.form.value).forEach(n=>{!0===this.form.value[n].current?this.form.value[n].current=1:!1===this.form.value[n].current&&(this.form.value[n].current=0)}),this.apiService.putSettings(this.form.value).subscribe(()=>{this.form.markAsPristine(),this.toastr.success(this.translate.instant("api.global.succes.saved.notify")),this.apiService.getSettings().subscribe(n=>{this.settings=n,this.settings.sort((i,s)=>i._Order-s._Order),n.forEach(i=>{i.ListOfSettings.forEach(c=>{"PluginAnalytics"===c.Name&&(1===c.current_value?(this.tracker.setConsentGiven(),this.tracker.rememberConsentGiven()):this.tracker.forgetConsentGiven())})})}),this.apiService.getRestartNeeded().subscribe(n=>{1===n.RestartNeeded?(this.headerService.setRestart(!0),this.open(this.contentRestart)):2===n.RestartNeeded?this.open(this.contentReset):3===n.RestartNeeded&&this.open(this.contentErase)})}))}open(n){this.modalService.open(n,{ariaLabelledBy:"modal-basic-title"}).result.then(i=>{},i=>{})}hasBasicSettings(n){return!!this.advanced||n.filter(i=>!1===i.Advanced).length>0}getTranslation(n,i){return this.translate.instant(n.concat(i))}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(U.FF),t.Y36(h.s),t.Y36(r.qu),t.Y36(Z._W),t.Y36(T.r),t.Y36(l.sK),t.Y36(x.ws))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-settings"]],viewQuery:function(n,i){if(1&n&&(t.Gf(g,5),t.Gf(g,5),t.Gf(g,5)),2&n){let s;t.iGM(s=t.CRH())&&(i.contentRestart=s.first),t.iGM(s=t.CRH())&&(i.contentReset=s.first),t.iGM(s=t.CRH())&&(i.contentErase=s.first)}},decls:11,vars:1,consts:[[3,"formGroup",4,"ngIf"],["contentRestart",""],["contentReset",""],["contentErase",""],[3,"formGroup"],[1,"h-100"],[1,"row"],[1,"col-sm-8",3,"innerHTML"],[1,"col-sm-4"],[1,"d-flex","flex-row-reverse","align-items-center"],[1,"p-2"],["translate","setting.validate.button",1,"btn","btn-primary",3,"disabled","click"],[1,"p-2","ml-3"],["translate","setting.reinit.button",1,"btn","btn-secondary",3,"click"],[1,"switch","switch-sm"],["type","checkbox","id","switch-advanced",1,"switch",3,"checked","click"],["for","switch-advanced","translate","setting.advanced.button",1,"mb-0"],[1,"card-title",3,"innerHTML"],[1,"mt-3"],[1,"col-sm-12","card-columns"],[4,"ngFor","ngForOf"],["class","card",4,"ngIf"],[1,"card"],[1,"card-header",3,"innerHTML"],[1,"card-body"],[1,"card-title"],[3,"innerHTML"],[1,"card-text"],[3,"setting","advanced"],[1,"modal-header"],["id","modal-basic-title","translate","setting.reloadplugin.alert.title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["translate","setting.reloadplugin.alert.subject",1,"modal-body"],[1,"modal-footer"],["type","button","translate","setting.reloadplugin.alert.cancel",1,"btn","btn-outline-dark",3,"click"],["id","modal-basic-title","translate","setting.resetplugin.alert.title",1,"modal-title"],["translate","setting.resetplugin.alert.subject",1,"modal-body"],["type","button","translate","setting.resetplugin.alert.cancel",1,"btn","btn-outline-dark",3,"click"],["id","modal-basic-title","translate","setting.eraseplugin.alert.title",1,"modal-title"],["translate","setting.eraseplugin.alert.subject",1,"modal-body"],["type","button","translate","setting.eraseplugin.alert.cancel",1,"btn","btn-outline-dark",3,"click"]],template:function(n,i){1&n&&(t.YNc(0,Y,51,10,"form",0),t._uU(1,"\n\n"),t.YNc(2,Q,19,0,"ng-template",null,1,t.W1O),t._uU(4,"\n\n"),t.YNc(5,H,19,0,"ng-template",null,2,t.W1O),t._uU(7,"\n\n"),t.YNc(8,I,19,0,"ng-template",null,3,t.W1O),t._uU(10,"\n")),2&n&&t.Q6J("ngIf",i.settings)},directives:[d.O5,r._Y,r.JL,r.sg,l.Pi,d.sg,q],pipes:[l.X$],styles:[""]}),e})(),data:{title:(0,_.Kl)("settings")}}];let D=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[],imports:[[f.Bz.forChild(L)],f.Bz]}),e})(),R=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[D,v.m]]}),e})()}}]);