"use strict";(self.webpackChunkz4d_plugin=self.webpackChunkz4d_plugin||[]).push([[157],{2157:(R,g,r)=>{r.r(g),r.d(g,{DeviceModule:()=>P});var U=r(4466),v=r(1083),d=r(8648),e=r(5e3),f=r(972),s=r(3075),u=r(7232),x=r(571),C=r(2290),m=r(3274),h=r(9808);const b=["table"];function y(n,a){if(1&n&&(e._uU(0,"\n            "),e.TgZ(1,"div",25),e._uU(2,"\n              "),e.TgZ(3,"div"),e._uU(4,"\n                "),e.TgZ(5,"strong"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e._uU(8),e.qZA(),e._uU(9,"\n            "),e.qZA(),e._uU(10,"\n          ")),2&n){const t=a.row;e.xp6(6),e.hij("",e.lcZ(7,2,"device.byname.devicename.param")," : "),e.xp6(2),e.hij(" ",t.Param,"\n              ")}}function w(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"a",28),e.NdJ("click",function(){e.CHM(t);const c=e.oxw().row;return e.oxw().toggleExpandRow(c)}),e._uU(1,"\n            "),e.qZA()}if(2&n){const t=e.oxw().expanded;e.ekj("datatable-icon-right",!t)("datatable-icon-down",t)}}function T(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"i",29),e.NdJ("click",function(){e.CHM(t);const c=e.oxw().row,i=e.oxw(),l=e.MAs(102);return i.rowToDelete=c,i.open(l)}),e.ALo(1,"translate"),e.qZA()}2&n&&e.s9C("title",e.lcZ(1,1,"device.byname.delete.colum"))}function N(n,a){if(1&n&&(e._uU(0,"\n            "),e.YNc(1,w,2,4,"a",26),e._uU(2,"\n            "),e.YNc(3,T,2,3,"i",27),e._uU(4,"\n          ")),2&n){const t=a.row;e.xp6(1),e.Q6J("ngIf","{}"!==t.Param),e.xp6(2),e.Q6J("ngIf","not in DZ"===t.ConsistencyCheck||"Bad Pairing"===t.ConsistencyCheck)}}function A(n,a){1&n&&e._uU(0),2&n&&e.hij("\n            ",a.row._NwkId,"\n          ")}function D(n,a){1&n&&e._uU(0),2&n&&e.hij("\n            ",a.row.IEEE,"\n          ")}function B(n,a){1&n&&e._uU(0),2&n&&e.hij("\n            ",a.row.Model,"\n          ")}function L(n,a){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij("\n              ",t,"\n            ")}}function k(n,a){if(1&n&&(e._uU(0,"\n            "),e.YNc(1,L,2,1,"div",30),e._uU(2,"\n          ")),2&n){const t=a.row;e.xp6(1),e.Q6J("ngForOf",t.WidgetList)}}function J(n,a){if(1&n){const t=e.EpF();e._uU(0,"\n            "),e.TgZ(1,"input",31),e.NdJ("change",function(c){const l=e.CHM(t).row;return e.oxw().updateValue(c,"ZDeviceName",l._NwkId)}),e.qZA(),e._uU(2,"\n          ")}if(2&n){const t=a.row;e.xp6(1),e.Q6J("value",t.ZDeviceName)}}function M(n,a){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij("\n              ",t,"\n            ")}}function q(n,a){if(1&n&&(e._uU(0,"\n            "),e.YNc(1,M,2,1,"div",30),e._uU(2,"\n          ")),2&n){const t=a.row;e.xp6(1),e.Q6J("ngForOf",t.MacCapa)}}function E(n,a){1&n&&e._uU(0),2&n&&e.hij("\n            ",a.row.LQI,"\n          ")}function Y(n,a){1&n&&e._uU(0),2&n&&e.hij("\n            ",a.row.Status,"\n          ")}function H(n,a){1&n&&e._uU(0),2&n&&e.hij("\n            ",a.row.Health,"\n          ")}function Q(n,a){if(1&n){const t=e.EpF();e._uU(0,"\n            "),e.TgZ(1,"i",32),e.NdJ("click",function(){const i=e.CHM(t).row,l=e.oxw(),p=e.MAs(105);return l.rowParameter=i,l.editParameter(p)}),e.qZA(),e._uU(2,"\n          ")}}function W(n,a){if(1&n){const t=e.EpF();e._uU(0,"\n  "),e.TgZ(1,"div",33),e._uU(2,"\n    "),e._UZ(3,"h4",34),e._uU(4,"\n    "),e.TgZ(5,"button",35),e.NdJ("click",function(){return e.CHM(t).$implicit.dismiss("Cross click")}),e._uU(6,"\n      "),e.TgZ(7,"span",36),e._uU(8,"\xd7"),e.qZA(),e._uU(9,"\n    "),e.qZA(),e._uU(10,"\n  "),e.qZA(),e._uU(11,"\n  "),e._UZ(12,"div",37),e._uU(13,"\n  "),e.TgZ(14,"div",38),e._uU(15,"\n    "),e.TgZ(16,"button",39),e.NdJ("click",function(){return e.CHM(t).$implicit.close("erase")}),e.qZA(),e._uU(17,"\n    "),e.TgZ(18,"button",40),e.NdJ("click",function(){return e.CHM(t).$implicit.dismiss("cancel")}),e.qZA(),e._uU(19,"\n  "),e.qZA(),e._uU(20,"\n")}}function j(n,a){if(1&n){const t=e.EpF();e._uU(0,"\n  "),e.TgZ(1,"div",33),e._uU(2,"\n    "),e._UZ(3,"h4",41),e._uU(4,"\n    "),e.TgZ(5,"button",35),e.NdJ("click",function(){return e.CHM(t).$implicit.close("cancel")}),e._uU(6,"\n      "),e.TgZ(7,"span",36),e._uU(8,"\xd7"),e.qZA(),e._uU(9,"\n    "),e.qZA(),e._uU(10,"\n  "),e.qZA(),e._uU(11,"\n  "),e.TgZ(12,"div",42),e._uU(13,"\n    "),e._UZ(14,"div",43),e.ALo(15,"translate"),e._uU(16,"\n    "),e.TgZ(17,"div",44),e._uU(18,"\n      "),e.TgZ(19,"div",45),e._uU(20),e.ALo(21,"translate"),e.qZA(),e._uU(22,"\n      "),e.TgZ(23,"div",45),e._uU(24,"\n        "),e.TgZ(25,"textarea",46),e.NdJ("change",function(c){return e.CHM(t),e.oxw().parameter=c}),e._uU(26),e.qZA(),e._uU(27,"\n      "),e.qZA(),e._uU(28,"\n    "),e.qZA(),e._uU(29,"\n  "),e.qZA(),e._uU(30,"\n  "),e.TgZ(31,"div",38),e._uU(32,"\n    "),e.TgZ(33,"button",47),e.NdJ("click",function(){return e.CHM(t).$implicit.dismiss("cancel")}),e.qZA(),e._uU(34,"\n    "),e.TgZ(35,"button",48),e.NdJ("click",function(){return e.CHM(t).$implicit.close("save")}),e.qZA(),e._uU(36,"\n  "),e.qZA(),e._uU(37,"\n")}if(2&n){const t=e.oxw();e.xp6(14),e.Q6J("innerHTML",e.lcZ(15,3,"device.byname.parameter.alert.subject"),e.oJD),e.xp6(6),e.hij("",e.lcZ(21,5,"device.byname.devicename.param")," :"),e.xp6(6),e.Oqu(t.rowParameter.Param)}}const I=function(n,a,t){return{emptyMessage:n,totalMessage:a,selectedMessage:t}},Z=new d.Yd("DeviceByNameComponent");let O=(()=>{class n{constructor(t,o,c,i){this.apiService=t,this.translate=o,this.modalService=c,this.toastr=i,this.rows=[],this.temp=[],this.hasEditing=!1,this.expanded={}}ngOnChanges(t){t.devices.currentValue!==t.devices.previousValue&&(this.json=this.devices,this.devices=this.devices,this.rows=this.devices,this.temp=[...this.rows])}ngOnInit(){}open(t){this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"}).result.then(o=>{this.delete()},o=>{})}editParameter(t){this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"}).result.then(o=>{this.updateValue(this.parameter,"Param",this.rowParameter._NwkId)},o=>{})}delete(){this.apiService.deleteZDeviceName(this.rowToDelete._NwkId).subscribe(()=>{const t=this.rows.indexOf(this.rowToDelete,0);this.rowToDelete=null,t>-1&&(this.rows.splice(t,1),this.rows=[...this.rows],this.temp=[...this.rows])})}updateValue(t,o,c){this.hasEditing=!0;const i=this.rows.find(l=>l._NwkId===c);i?i[o]=t.target.value:Z.error("row not found")}updateDevices(){this.apiService.putZDeviceName(this.json).subscribe(t=>{Z.debug(t),this.hasEditing=!1,this.toastr.success(this.translate.instant("api.global.succes.saved.notify"))})}updateFilter(t){const o=t.target.value.toLowerCase(),c=this.temp.filter(function(i){let l=!1;return i.Model&&(l=-1!==i.Model.toLowerCase().indexOf(o)),!l&&i.ZDeviceName&&(l=-1!==i.ZDeviceName.toLowerCase().indexOf(o)),!l&&i._NwkId&&(l=-1!==i._NwkId.toLowerCase().indexOf(o)),!l&&i.Status&&(l=-1!==i.Status.toLowerCase().indexOf(o)),!l&&i.IEEE&&(l=-1!==i.IEEE.toLowerCase().indexOf(o)),!l&&i.WidgetList&&i.WidgetList.forEach(function(_){!l&&_&&(l=-1!==_.toLowerCase().indexOf(o))}),!l&&i.MacCapa&&i.MacCapa.forEach(function(_){!l&&_&&(l=-1!==_.toLowerCase().indexOf(o))}),l||!o});this.rows=c,this.table.offset=0}toggleExpandRow(t){this.table.rowDetail.toggleExpandRow(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(f.s),e.Y36(u.sK),e.Y36(x.FF),e.Y36(C._W))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-device-by-name"]],viewQuery:function(t,o){if(1&t&&e.Gf(b,5),2&t){let c;e.iGM(c=e.CRH())&&(o.table=c.first)}},inputs:{devices:"devices"},features:[e._Bn([],[{provide:s.gN,useExisting:s.sg}]),e.TTD],decls:107,vars:77,consts:[[1,"card"],[1,"card-header"],[1,"btn","btn-primary","float-right",3,"disabled","translate","click"],[1,"card-body"],[1,"card-title",3,"innerHTML"],[1,"card-text"],["type","text",3,"placeholder","keyup"],[1,"bootstrap",3,"rows","columnMode","headerHeight","footerHeight","limit","rowHeight","messages"],["table",""],[3,"rowHeight"],["ngx-datatable-row-detail-template",""],["prop","ConsistencyCheck",3,"sortable","maxWidth","name"],["ngx-datatable-cell-template",""],["prop","_NwkId",3,"maxWidth","name"],["prop","IEEE",3,"maxWidth","name"],["prop","Model",3,"name"],["prop","WidgetList",3,"name"],["prop","ZDeviceName",3,"name"],["prop","MacCapa",3,"name","maxWidth"],["prop","LQI",3,"name","maxWidth"],["prop","Status",3,"name","maxWidth"],["prop","Health",3,"name","maxWidth"],["prop","ZDeviceName",3,"sortable","maxWidth","name"],["content",""],["editContent",""],[2,"padding-left","35px"],["href","javascript:void(0)","title","Expand/Collapse Row",3,"datatable-icon-right","datatable-icon-down","click",4,"ngIf"],["class","fa fa-trash","style","cursor: pointer",3,"title","click",4,"ngIf"],["href","javascript:void(0)","title","Expand/Collapse Row",3,"click"],[1,"fa","fa-trash",2,"cursor","pointer",3,"title","click"],[4,"ngFor","ngForOf"],["autofocus","","type","text",3,"value","change"],[1,"fas","fa-cog",2,"cursor","pointer",3,"click"],[1,"modal-header"],["id","modal-basic-title","translate","device.byname.alert.title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["translate","device.byname.alert.subject",1,"modal-body"],[1,"modal-footer"],["type","button","translate","device.byname.alert.delete",1,"btn","btn-primary",3,"click"],["type","button","translate","device.byname.alert.cancel",1,"btn","btn-outline-dark",3,"click"],["id","modal-basic-title","translate","device.byname.parameter.alert.title",1,"modal-title"],[1,"modal-body"],[3,"innerHTML"],[1,"row","mt-3"],[1,"col-sm-12"],["rows","5","cols","60",3,"change"],["type","button","translate","device.byname.parameter.alert.cancel",1,"btn","btn-outline-dark",3,"click"],["type","button","translate","device.byname.parameter.alert.save",1,"btn","btn-primary",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._uU(1,"\n  "),e.TgZ(2,"div",1),e._uU(3),e.ALo(4,"translate"),e.TgZ(5,"button",2),e.NdJ("click",function(){return o.updateDevices()}),e.ALo(6,"translate"),e.qZA(),e._uU(7,"\n  "),e.qZA(),e._uU(8,"\n  "),e.TgZ(9,"div",3),e._uU(10,"\n    "),e._UZ(11,"h5",4),e.ALo(12,"translate"),e.ALo(13,"translate"),e._uU(14,"\n    "),e.TgZ(15,"div",5),e._uU(16,"\n      "),e.TgZ(17,"input",6),e.NdJ("keyup",function(i){return o.updateFilter(i)}),e.ALo(18,"translate"),e.qZA(),e._uU(19,"\n      "),e.TgZ(20,"ngx-datatable",7,8),e.ALo(22,"translate"),e.ALo(23,"translate"),e.ALo(24,"translate"),e._uU(25,"\n        "),e.TgZ(26,"ngx-datatable-row-detail",9),e._uU(27,"\n          "),e.YNc(28,y,11,4,"ng-template",10),e._uU(29,"\n        "),e.qZA(),e._uU(30,"\n\n        "),e.TgZ(31,"ngx-datatable-column",11),e.ALo(32,"translate"),e._uU(33,"\n          "),e.YNc(34,N,5,2,"ng-template",12),e._uU(35,"\n        "),e.qZA(),e._uU(36,"\n\n        "),e.TgZ(37,"ngx-datatable-column",13),e.ALo(38,"translate"),e._uU(39,"\n          "),e.YNc(40,A,1,1,"ng-template",12),e._uU(41,"\n        "),e.qZA(),e._uU(42,"\n        "),e.TgZ(43,"ngx-datatable-column",14),e.ALo(44,"translate"),e._uU(45,"\n          "),e.YNc(46,D,1,1,"ng-template",12),e._uU(47,"\n        "),e.qZA(),e._uU(48,"\n        "),e.TgZ(49,"ngx-datatable-column",15),e.ALo(50,"translate"),e._uU(51,"\n          "),e.YNc(52,B,1,1,"ng-template",12),e._uU(53,"\n        "),e.qZA(),e._uU(54,"\n        "),e.TgZ(55,"ngx-datatable-column",16),e.ALo(56,"translate"),e._uU(57,"\n          "),e.YNc(58,k,3,1,"ng-template",12),e._uU(59,"\n        "),e.qZA(),e._uU(60,"\n        "),e.TgZ(61,"ngx-datatable-column",17),e.ALo(62,"translate"),e._uU(63,"\n          "),e.YNc(64,J,3,1,"ng-template",12),e._uU(65,"\n        "),e.qZA(),e._uU(66,"\n        "),e.TgZ(67,"ngx-datatable-column",18),e.ALo(68,"translate"),e._uU(69,"\n          "),e.YNc(70,q,3,1,"ng-template",12),e._uU(71,"\n        "),e.qZA(),e._uU(72,"\n        "),e.TgZ(73,"ngx-datatable-column",19),e.ALo(74,"translate"),e._uU(75,"\n          "),e.YNc(76,E,1,1,"ng-template",12),e._uU(77,"\n        "),e.qZA(),e._uU(78,"\n        "),e.TgZ(79,"ngx-datatable-column",20),e.ALo(80,"translate"),e._uU(81,"\n          "),e.YNc(82,Y,1,1,"ng-template",12),e._uU(83,"\n        "),e.qZA(),e._uU(84,"\n        "),e.TgZ(85,"ngx-datatable-column",21),e.ALo(86,"translate"),e._uU(87,"\n          "),e.YNc(88,H,1,1,"ng-template",12),e._uU(89,"\n        "),e.qZA(),e._uU(90,"\n        "),e.TgZ(91,"ngx-datatable-column",22),e.ALo(92,"translate"),e._uU(93,"\n          "),e.YNc(94,Q,3,0,"ng-template",12),e._uU(95,"\n        "),e.qZA(),e._uU(96,"\n      "),e.qZA(),e._uU(97,"\n    "),e.qZA(),e._uU(98,"\n  "),e.qZA(),e._uU(99,"\n"),e.qZA(),e._uU(100,"\n\n"),e.YNc(101,W,21,0,"ng-template",null,23,e.W1O),e._uU(103,"\n\n"),e.YNc(104,j,38,7,"ng-template",null,24,e.W1O),e._uU(106,"\n")),2&t&&(e.xp6(3),e.hij("\n    ",e.lcZ(4,35,"device.byname.header"),"\n    "),e.xp6(2),e.s9C("translate",e.lcZ(6,37,"device.byname.validate.button")),e.Q6J("disabled",!o.hasEditing),e.xp6(6),e.Q6J("innerHTML",e.lcZ(12,39,"group.create.subtitle"),e.oJD)("innerHTML",e.lcZ(13,41,"device.byname.subtitle"),e.oJD),e.xp6(6),e.s9C("placeholder",e.lcZ(18,43,"device.byname.placeholder")),e.xp6(3),e.Q6J("rows",o.rows)("columnMode","force")("headerHeight",40)("footerHeight","auto")("limit",10)("rowHeight","auto")("messages",e.kEZ(73,I,e.lcZ(22,45,"NODATA"),e.lcZ(23,47,"TOTAL"),e.lcZ(24,49,"SELECTED"))),e.xp6(6),e.Q6J("rowHeight","auto"),e.xp6(5),e.s9C("name",e.lcZ(32,51,"device.byname.trash.column")),e.Q6J("sortable",!1)("maxWidth",55),e.xp6(6),e.s9C("name",e.lcZ(38,53,"device.byname.shortid.column")),e.Q6J("maxWidth",100),e.xp6(6),e.s9C("name",e.lcZ(44,55,"device.byname.ieee.column")),e.Q6J("maxWidth",150),e.xp6(6),e.s9C("name",e.lcZ(50,57,"device.byname.model.column")),e.xp6(6),e.s9C("name",e.lcZ(56,59,"device.byname.widget.column")),e.xp6(6),e.s9C("name",e.lcZ(62,61,"device.byname.devicename.column")),e.xp6(6),e.s9C("name",e.lcZ(68,63,"device.byname.capabilities.column")),e.Q6J("maxWidth",130),e.xp6(6),e.s9C("name",e.lcZ(74,65,"device.byname.lqi.column")),e.Q6J("maxWidth",100),e.xp6(6),e.s9C("name",e.lcZ(80,67,"device.byname.status.column")),e.Q6J("maxWidth",100),e.xp6(6),e.s9C("name",e.lcZ(86,69,"device.byname.health.column")),e.Q6J("maxWidth",100),e.xp6(6),e.s9C("name",e.lcZ(92,71,"device.byname.devicename.param")),e.Q6J("sortable",!1)("maxWidth",100))},directives:[u.Pi,m.nE,m.$7,m.AR,m.UC,m.vq,h.O5,h.sg],pipes:[u.X$],styles:[""]}),n})();new d.Yd("DeviceComponent");const F=[{path:"",component:(()=>{class n{constructor(t,o,c){this.apiService=t,this.formBuilder=o,this.translate=c}ngOnInit(){this.form=this.formBuilder.group({devices:this.formBuilder.group({}),permit:this.formBuilder.group({})}),this.apiService.getZDeviceName().subscribe(t=>{this.devices=t})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(f.s),e.Y36(s.qu),e.Y36(u.sK))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-device"]],decls:5,vars:2,consts:[[3,"formGroup"],[3,"devices"]],template:function(t,o){1&t&&(e.TgZ(0,"form",0),e._uU(1,"\n  "),e._UZ(2,"app-device-by-name",1),e._uU(3,"\n"),e.qZA(),e._uU(4,"\n")),2&t&&(e.Q6J("formGroup",o.form),e.xp6(2),e.Q6J("devices",o.devices))},directives:[s._Y,s.JL,s.sg,O],styles:[""]}),n})(),data:{title:(0,d.Kl)("device")}}];let S=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[],imports:[[v.Bz.forChild(F)],v.Bz]}),n})(),P=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[S,U.m]]}),n})()}}]);