"use strict";(self.webpackChunkz4d_plugin=self.webpackChunkz4d_plugin||[]).push([[192],{31192:(F,p,a)=>{a.r(p),a.d(p,{SettingsModule:()=>R});var v=a(44466),f=a(96749),_=a(88648),t=a(94650),h=a(75958),U=a(5830),c=a(24006),Z=a(97185),T=a(19513),l=a(54463),C=a(42543),g=a(36895),x=a(91835);function b(n,o){if(1&n&&(t.TgZ(0,"div",4),t._uU(1,"\n    "),t._UZ(2,"label",5),t._uU(3,"\n    "),t.TgZ(4,"div",6),t._uU(5,"\n      "),t._UZ(6,"input",7),t._uU(7,"\n    "),t.qZA(),t._uU(8,"\n  "),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.s9C("translate",e.setting.Name)}}function S(n,o){if(1&n&&(t.TgZ(0,"div",4),t._uU(1,"\n    "),t._UZ(2,"label",5),t._uU(3,"\n    "),t.TgZ(4,"div",6),t._uU(5,"\n      "),t._UZ(6,"input",7),t._uU(7,"\n    "),t.qZA(),t._uU(8,"\n  "),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.s9C("translate",e.setting.Name)}}function A(n,o){if(1&n&&(t.TgZ(0,"div",4),t._uU(1,"\n    "),t._UZ(2,"label",5),t._uU(3,"\n    "),t.TgZ(4,"div",6),t._uU(5,"\n      "),t._UZ(6,"input",8),t._uU(7,"\n    "),t.qZA(),t._uU(8,"\n  "),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.s9C("translate",e.setting.Name)}}function N(n,o){if(1&n&&(t.TgZ(0,"div",4),t._uU(1,"\n    "),t._UZ(2,"label",5),t._uU(3,"\n    "),t.TgZ(4,"div",6),t._uU(5,"\n      "),t._UZ(6,"input",9),t._uU(7,"\n    "),t.qZA(),t._uU(8,"\n  "),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.s9C("translate",e.setting.Name)}}function k(n,o){if(1&n&&(t.TgZ(0,"div",4),t._uU(1,"\n    "),t._UZ(2,"label",5),t._uU(3,"\n    "),t.TgZ(4,"div",6),t._uU(5,"\n      "),t.TgZ(6,"ng-select",10),t._uU(7,"\n      "),t.qZA(),t._uU(8,"\n    "),t.qZA(),t._uU(9,"\n  "),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.s9C("translate",e.setting.Name),t.xp6(4),t.Q6J("items",e.list)("compareWith",e.compareNumeric)("closeOnSelect",!0)}}function y(n,o){if(1&n&&(t.TgZ(0,"div",11),t._uU(1,"\n    "),t._UZ(2,"input",12),t._uU(3,"\n    "),t._UZ(4,"label",13),t._uU(5,"\n  "),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.s9C("id",e.setting.Name),t.xp6(2),t.s9C("for",e.setting.Name),t.s9C("translate",e.setting.Name)}}function J(n,o){if(1&n&&(t.TgZ(0,"div",1),t._uU(1,"\n  "),t.YNc(2,b,9,1,"div",2),t._uU(3,"\n  "),t.YNc(4,S,9,1,"div",2),t._uU(5,"\n  "),t.YNc(6,A,9,1,"div",2),t._uU(7,"\n  "),t.YNc(8,N,9,1,"div",2),t._uU(9,"\n  "),t.YNc(10,k,10,4,"div",2),t._uU(11,"\n  "),t.YNc(12,y,6,3,"div",3),t._uU(13,"\n"),t.qZA()),2&n){const e=t.oxw();t.Q6J("formGroupName",e.setting.Name),t.xp6(2),t.Q6J("ngIf","str"===e.setting.DataType),t.xp6(2),t.Q6J("ngIf","path"===e.setting.DataType),t.xp6(2),t.Q6J("ngIf","int"===e.setting.DataType),t.xp6(2),t.Q6J("ngIf","hex"===e.setting.DataType),t.xp6(2),t.Q6J("ngIf","list"===e.setting.DataType),t.xp6(2),t.Q6J("ngIf","bool"===e.setting.DataType)}}new _.Yd("SettingComponent");let q=(()=>{class n{constructor(e,i,s){this.formBuilder=e,this.fgd=i,this.translate=s,this.list=[]}ngOnChanges(e){let i;if(e.setting&&e.setting.currentValue){this.setting=e.setting.currentValue,"hex"===this.setting.DataType?i=this.formBuilder.group({current:["",c.kI.compose([c.kI.required,c.kI.pattern("^[0-9A-Fa-f]+")])]}):"bool"===this.setting.DataType?i=this.formBuilder.group({current:[]}):"list"===this.setting.DataType?(i=this.formBuilder.group({current:[null,c.kI.required]}),this.list=[],this.setting.list.forEach(r=>{const u=Object.keys(r)[0],m=Object.values(r)[0];this.list.push({label:u,value:m})})):i=this.formBuilder.group({current:["",c.kI.required]}),this.fgd.form.addControl(this.setting.Name,i);const s=""!==this.setting.current_value?this.setting.current_value:this.setting.default_value;this.fgd.form.get(this.setting.Name).get("current").patchValue(s)}}compareNumeric(e,i){return isNaN(e.value)?e.value===i:e.value===Number(i)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.qu),t.Y36(c.sg),t.Y36(l.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-setting"]],inputs:{setting:"setting",advanced:"advanced"},features:[t._Bn([],[{provide:c.gN,useExisting:c.sg}]),t.TTD],decls:2,vars:1,consts:[[3,"formGroupName",4,"ngIf"],[3,"formGroupName"],["class","form-group row mt-2",4,"ngIf"],["class","form-check form-check-inline mt-2",4,"ngIf"],[1,"form-group","row","mt-2"],["for","current",1,"col-sm-6","col-form-label",3,"translate"],[1,"col-sm"],["type","text","formControlName","current",1,"w-100","form-control"],["type","number","formControlName","current",1,"w-50","form-control"],["type","text","formControlName","current",1,"w-50","form-control"],["bindLabel","label","bindValue","value","formControlName","current",3,"items","compareWith","closeOnSelect"],[1,"form-check","form-check-inline","mt-2"],["formControlName","current","type","checkbox",1,"form-check-input",3,"id"],[1,"form-check-label",3,"for","translate"]],template:function(e,i){1&e&&(t.YNc(0,J,14,7,"div",0),t._uU(1,"\n")),2&e&&t.Q6J("ngIf",!1===i.setting.Advanced||i.advanced===i.setting.Advanced)},dependencies:[g.O5,c.Fj,c.wV,c.Wl,c.JJ,c.JL,c.u,c.x0,x.w9,l.Pi],styles:["was-validated[_ngcontent-%COMP%]   .custom-control-input[_ngcontent-%COMP%]:valid ~ .custom-control-label[_ngcontent-%COMP%], .custom-control-input.is-valid[_ngcontent-%COMP%] ~ .custom-control-label[_ngcontent-%COMP%]{color:#000}"]}),n})();const d=["contentRestart"];function O(n,o){if(1&n&&(t.ynx(0),t._uU(1,"\n              "),t._UZ(2,"app-setting",25),t._uU(3,"\n            "),t.BQk()),2&n){const e=o.$implicit,i=t.oxw(4);t.xp6(2),t.Q6J("setting",e)("advanced",i.advanced)}}function M(n,o){if(1&n&&(t.TgZ(0,"div",21),t._uU(1,"\n        "),t._UZ(2,"div",22),t._uU(3,"\n        "),t.TgZ(4,"div",23),t._uU(5,"\n          "),t._UZ(6,"p",17),t._uU(7,"\n          "),t.TgZ(8,"div",24),t._uU(9,"\n            "),t.YNc(10,O,4,2,"ng-container",19),t._uU(11,"\n          "),t.qZA(),t._uU(12,"\n        "),t.qZA(),t._uU(13,"\n      "),t.qZA()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(2),t.Q6J("innerHTML",i.getTranslation("setting.header.",e._Theme),t.oJD),t.xp6(4),t.Q6J("innerHTML",i.getTranslation("setting.subtitle.",e._Theme),t.oJD),t.xp6(4),t.Q6J("ngForOf",e.ListOfSettings)}}function w(n,o){if(1&n&&(t.TgZ(0,"div"),t._uU(1,"\n      "),t.YNc(2,M,14,3,"div",20),t._uU(3,"\n    "),t.qZA()),2&n){const e=o.$implicit,i=t.oxw(2);t.xp6(2),t.Q6J("ngIf",i.hasBasicSettings(e.ListOfSettings))}}function Y(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"form",4),t._uU(1,"\n  "),t.TgZ(2,"fieldset",5),t._uU(3,"\n    "),t.TgZ(4,"legend"),t._uU(5,"\n      "),t.TgZ(6,"div",6),t._uU(7,"\n        "),t._UZ(8,"h5",7),t.ALo(9,"translate"),t._uU(10,"\n        "),t.TgZ(11,"div",8),t._uU(12,"\n          "),t.TgZ(13,"div",9),t._uU(14,"\n            "),t.TgZ(15,"div",10),t._uU(16,"\n              "),t.TgZ(17,"button",11),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.updateSettings())}),t.qZA(),t._uU(18,"\n            "),t.qZA(),t._uU(19,"\n            "),t.TgZ(20,"div",12),t._uU(21,"\n              "),t.TgZ(22,"button",13),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.reinitSettings())}),t.qZA(),t._uU(23,"\n            "),t.qZA(),t._uU(24,"\n            "),t.TgZ(25,"div",14),t._uU(26,"\n              "),t.TgZ(27,"input",15),t.NdJ("click",function(s){t.CHM(e);const r=t.oxw();return t.KtG(r.advancedSettings(s))}),t.qZA(),t._uU(28,"\n              "),t._UZ(29,"label",16),t._uU(30,"\n            "),t.qZA(),t._uU(31,"\n          "),t.qZA(),t._uU(32,"\n        "),t.qZA(),t._uU(33,"\n      "),t.qZA(),t._uU(34,"\n    "),t.qZA(),t._uU(35,"\n    "),t._UZ(36,"p",17),t.ALo(37,"translate"),t._uU(38,"\n  "),t.qZA(),t._uU(39,"\n  "),t.TgZ(40,"div",18),t._uU(41,"\n    "),t.YNc(42,w,4,1,"div",19),t._uU(43,"\n  "),t.qZA(),t._uU(44,"\n"),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(8),t.Q6J("innerHTML",t.lcZ(9,6,"setting.help.legend"),t.oJD),t.xp6(9),t.Q6J("disabled",!e.form.valid),t.xp6(10),t.Q6J("checked",e.advanced),t.xp6(9),t.Q6J("innerHTML",t.lcZ(37,8,"setting.help.link"),t.oJD),t.xp6(6),t.Q6J("ngForOf",e.settings)}}function G(n,o){if(1&n){const e=t.EpF();t._uU(0,"\n  "),t.TgZ(1,"div",26),t._uU(2,"\n    "),t._UZ(3,"h4",27),t._uU(4,"\n    "),t.TgZ(5,"button",28),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.KtG(r.dismiss("Cross click"))}),t.qZA(),t._uU(6,"\n  "),t.qZA(),t._uU(7,"\n  "),t._UZ(8,"div",29),t._uU(9,"\n  "),t.TgZ(10,"div",30),t._uU(11,"\n    "),t.TgZ(12,"button",31),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.KtG(r.dismiss("cancel"))}),t.qZA(),t._uU(13,"\n  "),t.qZA(),t._uU(14,"\n")}}function Q(n,o){if(1&n){const e=t.EpF();t._uU(0,"\n  "),t.TgZ(1,"div",26),t._uU(2,"\n    "),t._UZ(3,"h4",32),t._uU(4,"\n    "),t.TgZ(5,"button",28),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.KtG(r.dismiss("Cross click"))}),t.qZA(),t._uU(6,"\n  "),t.qZA(),t._uU(7,"\n  "),t._UZ(8,"div",33),t._uU(9,"\n  "),t.TgZ(10,"div",30),t._uU(11,"\n    "),t.TgZ(12,"button",34),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.KtG(r.dismiss("cancel"))}),t.qZA(),t._uU(13,"\n  "),t.qZA(),t._uU(14,"\n")}}function I(n,o){if(1&n){const e=t.EpF();t._uU(0,"\n  "),t.TgZ(1,"div",26),t._uU(2,"\n    "),t._UZ(3,"h4",35),t._uU(4,"\n    "),t.TgZ(5,"button",28),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.KtG(r.dismiss("Cross click"))}),t.qZA(),t._uU(6,"\n  "),t.qZA(),t._uU(7,"\n  "),t._UZ(8,"div",36),t._uU(9,"\n  "),t.TgZ(10,"div",30),t._uU(11,"\n    "),t.TgZ(12,"button",37),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.KtG(r.dismiss("cancel"))}),t.qZA(),t._uU(13,"\n  "),t.qZA(),t._uU(14,"\n")}}new _.Yd("SettingsComponent");const H=[{path:"",component:(()=>{class n{constructor(e,i,s,r,u,m,B){this.modalService=e,this.apiService=i,this.formBuilder=s,this.toastr=r,this.headerService=u,this.translate=m,this.tracker=B,this.advanced=!1}ngOnInit(){this.form=this.formBuilder.group({}),this.apiService.getSettings().subscribe(e=>{this.settings=e,this.settings.sort((i,s)=>i._Order-s._Order)})}reinitSettings(){this.settings.forEach(e=>{const i=[];e.ListOfSettings.forEach(s=>{"path"!==s.DataType&&(s.current_value=s.default_value),i.push(Object.assign({},s))}),e.ListOfSettings=i}),this.settings=[...this.settings],this.form.markAsTouched()}advancedSettings(e){this.advanced=!!e.currentTarget.checked}updateSettings(){this.form.invalid?this.form.markAsTouched():(Object.keys(this.form.value).forEach(e=>{!0===this.form.value[e].current?this.form.value[e].current=1:!1===this.form.value[e].current&&(this.form.value[e].current=0)}),this.apiService.putSettings(this.form.value).subscribe(()=>{this.form.markAsPristine(),this.toastr.success(this.translate.instant("api.global.succes.saved.notify")),this.apiService.getSettings().subscribe(e=>{this.settings=e,this.settings.sort((i,s)=>i._Order-s._Order),e.forEach(i=>{i.ListOfSettings.forEach(r=>{"PluginAnalytics"===r.Name&&(1===r.current_value?(this.tracker.setConsentGiven(),this.tracker.rememberConsentGiven()):this.tracker.forgetConsentGiven())})})}),this.apiService.getRestartNeeded().subscribe(e=>{1===e.RestartNeeded?(this.headerService.setRestart(!0),this.open(this.contentRestart)):2===e.RestartNeeded?this.open(this.contentReset):3===e.RestartNeeded&&this.open(this.contentErase)})}))}open(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"}).result.then(i=>{},i=>{})}hasBasicSettings(e){return!!this.advanced||e.filter(i=>!1===i.Advanced).length>0}getTranslation(e,i){return this.translate.instant(e.concat(i))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.FF),t.Y36(U.s),t.Y36(c.qu),t.Y36(Z._W),t.Y36(T.r),t.Y36(l.sK),t.Y36(C.ws))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-settings"]],viewQuery:function(e,i){if(1&e&&(t.Gf(d,5),t.Gf(d,5),t.Gf(d,5)),2&e){let s;t.iGM(s=t.CRH())&&(i.contentRestart=s.first),t.iGM(s=t.CRH())&&(i.contentReset=s.first),t.iGM(s=t.CRH())&&(i.contentErase=s.first)}},decls:11,vars:1,consts:[[3,"formGroup",4,"ngIf"],["contentRestart",""],["contentReset",""],["contentErase",""],[3,"formGroup"],[1,"h-100"],[1,"row"],[1,"col-sm-8",3,"innerHTML"],[1,"col-sm-4"],[1,"d-flex","flex-row-reverse","align-items-center"],[1,"p-2"],["translate","setting.validate.button",1,"btn","btn-primary",3,"disabled","click"],[1,"p-2","ms-3"],["translate","setting.reinit.button",1,"btn","btn-secondary",3,"click"],[1,"switch","switch-sm"],["type","checkbox","id","switch-advanced",1,"switch",3,"checked","click"],["for","switch-advanced","translate","setting.advanced.button",1,"mb-0"],[1,"card-text",3,"innerHTML"],[1,"row","row-cols-1","row-cols-md-3","g-4","mt-2"],[4,"ngFor","ngForOf"],["class","card h-100",4,"ngIf"],[1,"card","h-100"],[1,"card-header","fw-bold",3,"innerHTML"],[1,"card-body"],[1,"card-text"],[3,"setting","advanced"],[1,"modal-header"],["id","modal-basic-title","translate","setting.reloadplugin.alert.title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],["translate","setting.reloadplugin.alert.subject",1,"modal-body"],[1,"modal-footer"],["type","button","translate","setting.reloadplugin.alert.cancel",1,"btn","btn-outline-dark",3,"click"],["id","modal-basic-title","translate","setting.resetplugin.alert.title",1,"modal-title"],["translate","setting.resetplugin.alert.subject",1,"modal-body"],["type","button","translate","setting.resetplugin.alert.cancel",1,"btn","btn-outline-dark",3,"click"],["id","modal-basic-title","translate","setting.eraseplugin.alert.title",1,"modal-title"],["translate","setting.eraseplugin.alert.subject",1,"modal-body"],["type","button","translate","setting.eraseplugin.alert.cancel",1,"btn","btn-outline-dark",3,"click"]],template:function(e,i){1&e&&(t.YNc(0,Y,45,10,"form",0),t._uU(1,"\n\n"),t.YNc(2,G,15,0,"ng-template",null,1,t.W1O),t._uU(4,"\n\n"),t.YNc(5,Q,15,0,"ng-template",null,2,t.W1O),t._uU(7,"\n\n"),t.YNc(8,I,15,0,"ng-template",null,3,t.W1O),t._uU(10,"\n")),2&e&&t.Q6J("ngIf",i.settings)},dependencies:[g.sg,g.O5,c._Y,c.JL,c.sg,l.Pi,q,l.X$],styles:[".btn-secondary[_ngcontent-%COMP%]{--bs-btn-color: white}"]}),n})(),data:{title:(0,_.Kl)("settings")}}];let L=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[f.Bz.forChild(H),f.Bz]}),n})(),R=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[L,v.m]}),n})()}}]);